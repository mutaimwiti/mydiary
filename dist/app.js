!function(e){var t={};function n(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)n.d(r,u,function(t){return e[t]}.bind(null,u));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getElement",value:function(e){var t=e.substring(1,e.length);switch(e.charAt(0)){case"#":return document.getElementById(t);case".":return document.getElementsByClassName(t)}}},{key:"getValue",value:function(e){var t=this.getElement("#"+e);return""===t.value?null:t.value}},{key:"getValues",value:function(){for(var e={},t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var u=!0,a=!1,i=void 0;try{for(var l,o=n[Symbol.iterator]();!(u=(l=o.next()).done);u=!0){var f=l.value;e[f]=this.getValue(f)}}catch(e){a=!0,i=e}finally{try{!u&&o.return&&o.return()}finally{if(a)throw i}}return e}},{key:"registerListener",value:function(e,t,n){var r=this.getElement(e);(r instanceof HTMLCollection?Array.from(r):r?[r]:[]).forEach(function(e){e.addEventListener(t,function(e){e.preventDefault(),n.action(e)})})}},{key:"hide",value:function(e){$(e).hide()}},{key:"remove",value:function(e){$(e).remove()}},{key:"html",value:function(e,t){$(e).html(t)}},{key:"append",value:function(e,t){$(e).append(t)}},{key:"addClass",value:function(e,t){$(e).addClass(t)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return e&&e.__esModule?e:{default:e}}(n(5));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"get",value:function(){return localStorage.getItem("auth-token")}},{key:"set",value:function(e){localStorage.setItem("auth-token",e)}},{key:"clear",value:function(){localStorage.removeItem("auth-token")}},{key:"check",value:function(){"signup.html"!==u.default.uri&&"signin.html"!==u.default.uri&&(this.get()||this.require())}},{key:"require",value:function(){this.clear(),u.default.redirect("signin.html")}},{key:"logout",value:function(){this.clear(),u.default.redirect("index.html")}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"init",value:function(){var e=this;this.errorBox=$("#app_errors"),this.successBox=$("#app_success"),$("input").keyup(function(){return e.clear()})}},{key:"success",value:function(e){this[this.type(e)](this.successBox,e)}},{key:"error",value:function(e){this[this.type(e)](this.errorBox,e)}},{key:"type",value:function(e){return Array.isArray(e)?"many":"single"}},{key:"single",value:function(e,t){var n="<ul><li>"+t+"</li></ul>";e.empty().html(n).show()}},{key:"many",value:function(e,t){var n=$("<ul>"),r=!0,u=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var o=i.value;n.append("<li>"+o+"</li>")}}catch(e){u=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(u)throw a}}e.empty().html(n).show()}},{key:"clear",value:function(){this.errorBox.hide().empty(),this.successBox.hide().empty()}}]),e}();u.init(),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=i(n(2)),a=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"path",value:function(e){return this.URL+e}},{key:"id",value:function(e){return parseInt(e.substring(e.lastIndexOf("/")+1))}},{key:"json",value:function(e,t,n,r){var i=this,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];u.default.clear();var o={};o.method=e,"get"===e&&null===n||(o.body=JSON.stringify(n)),o.headers={"Content-Type":"application/json","x-access-token":l?a.default.get():null};var f=!1,c=0;fetch(this.path(t),o).then(function(e){return f=e.ok,c=e.status,e.json()}).then(function(e){r.handle(f,c,e,i.id(t))}).catch(function(e){console.log(e)})}},{key:"get",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.json("get",e,null,t,n)}},{key:"post",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.json("post",e,t,n,r)}},{key:"put",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.json("put",e,t,n,r)}},{key:"delete",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.json("delete",e,null,t,n)}},{key:"URL",get:function(){return"https://mdiary-v1.herokuapp.com/api/v1/"}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=i(n(2)),a=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"handle",value:function(e,t){switch(e){case 401:a.default.require();break;case 422:this.validation(t);break;default:this.generic(t)}}},{key:"validation",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,l=e.errors[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var o=i.value;t.push(e.errors[o])}}catch(e){r=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw a}}u.default.error(t)}},{key:"generic",value:function(e){u.default.error(e.message?e.message:this.fallback)}},{key:"fallback",get:function(){return"OOPS! Seems like something went wrong."}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"param",value:function(e){return new URL(this.url).searchParams.get(e)}},{key:"redirect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index.html";window.location=this.address+"/"+e}},{key:"redirectToEntries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.redirect("entries/"+e)}},{key:"url",get:function(){return window.location.href}},{key:"uri",get:function(){return this.url.substr(this.url.lastIndexOf("/")+1)}},{key:"address",get:function(){var e=window.location.href;return e.includes("entries")&&(e=e.substring(0,e.lastIndexOf("entries"))),e.substring(0,e.lastIndexOf("/"))}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=c(n(3)),a=c(n(0)),i=c(n(7)),l=c(n(2)),o=c(n(4)),f=c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"listen",value:function(){a.default.registerListener(".delete","click",this)}},{key:"action",value:function(e){var t=e.target.dataset.entry;u.default.delete("entries/"+t,this)}},{key:"handle",value:function(e,t,n,r){f.default.uri.startsWith("view.html")?this.handleView(e,t):this.handleIndex(e,t,r),e||404===t||o.default.handle(t,n)}},{key:"handleView",value:function(e,t){e?(l.default.success("The entry was deleted successfully"),$("#entry_display").empty()):404===t&&f.default.redirectToEntries()}},{key:"handleIndex",value:function(e,t,n){e?i.default.remove(n):404===t&&i.default.remove(n)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=f(n(3)),a=f(n(0)),i=f(n(4)),l=f(n(2)),o=f(n(6));function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"get",value:function(){u.default.get("entries",this)}},{key:"handle",value:function(e,t,n){if(e){var r=n.entries,u=n.count;u?(this.display(r,u),o.default.listen()):l.default.success("You have no entries.")}else i.default.handle(t,n)}},{key:"display",value:function(e,t){for(var n=0;n<t;n++){var r=e[n],u=r.id,i=r.title,l=r.created_at;a.default.append("#entries_display",'<div class="entry-card" id="entry_id_'+u+'">\n                    <div class="row">\n                        <div class="col-m4">\n                            <a href="view.html?id='+u+'" class="btn btn-sm">'+i+'</a>\n                        </div>\n                        <div class="col-m4">'+l+'</div>\n                        <div class="col-m4">\n                            <a href="edit.html?id='+u+'" class="btn-small">Edit</a>\n                            <a href data-entry="'+u+'" class="delete btn-small">Delete</a>\n                        </div>\n                    </div>\n                </div>')}}},{key:"remove",value:function(e){a.default.remove("#entry_id_"+e)}}]),e}();t.default=c},function(e,t,n){"use strict";var r=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}u(n(1)).default.check(),r.default.load()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=h(n(0)),a=h(n(5)),i=h(n(1)),l=h(n(10)),o=h(n(11)),f=h(n(12)),c=h(n(13)),s=h(n(14)),d=h(n(15)),v=h(n(7)),y=h(n(16));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"load",value:function(){var e=a.default.uri,t=i.default.get();if(this.activatePageLink(e),"signup.html"===e||"signin.html"===e)return t?a.default.redirectToEntries():this.loadAuthPage(e);if(t){if(o.default.listen(),a.default.url.includes("/entries/"))return this.loadEntryPage(e);if("profile.html"===e)return l.default.get();a.default.redirect()}else i.default.require()}},{key:"activatePageLink",value:function(e){u.default.addClass('a[href="'+(""===e?"./":e)+'"]',"active")}},{key:"loadAuthPage",value:function(e){switch(e){case"signin.html":f.default.listen();break;case"signup.html":c.default.listen()}}},{key:"loadEntryPage",value:function(e){switch(e){case"":return v.default.get();case"create.html":return y.default.listen();default:if(e.startsWith("view.html"))return s.default.get(a.default.param("id"));if(e.startsWith("edit.html"))return d.default.listen()}a.default.redirect()}}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"get",value:function(){}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=i(n(0)),a=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"listen",value:function(){u.default.registerListener("#logout","click",this)}},{key:"action",value:function(){a.default.logout()}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=c(n(3)),a=c(n(0)),i=c(n(1)),l=c(n(2)),o=c(n(4)),f=c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"listen",value:function(){a.default.registerListener("#login_form","submit",this)}},{key:"action",value:function(){u.default.post("login",a.default.getValues("email","password"),this,!1)}},{key:"handle",value:function(e,t,n){e?(i.default.set(n.token),f.default.redirectToEntries()):401===t?l.default.error(n.message):o.default.handle(t,n)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=o(n(3)),a=o(n(0)),i=o(n(4)),l=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"listen",value:function(){a.default.registerListener("#sign_up_form","submit",this)}},{key:"action",value:function(){u.default.post("signup",a.default.getValues("name","email","password"),this,!1)}},{key:"handle",value:function(e,t,n){e?l.default.success('Successfully signed up. <a href="signin.html">Sign in</a> to get started!'):i.default.handle(t,n)}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=o(n(3)),a=o(n(4)),i=o(n(6)),l=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"get",value:function(e){u.default.get("entries/"+e,this)}},{key:"handle",value:function(e,t,n){e?(this.display(n.entry),i.default.listen()):a.default.handle(t,n)}},{key:"display",value:function(e){var t=e.id,n=e.title,r=e.body,u=e.created_at;l.default.html("#entry_display",'<div class="panel">\n                <div class="panel-body">\n                    <div class="entry">\n                        <a href="edit.html?id='+t+'" class="link-button">Edit</a>\n                        <h4>Date: '+u+"</h4>\n                        <h4>Title: "+n+"</h4>\n                        <p>"+r+'</p>\n                        <a href data-entry="'+t+'" class="delete link-button">Delete</a>\n                    </div>\n                </div>\n            </div>')}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"listen",value:function(){}},{key:"action",value:function(){}},{key:"handle",value:function(){}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"listen",value:function(){}},{key:"action",value:function(){}},{key:"handle",value:function(){}}]),e}();t.default=u}]);