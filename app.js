!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0,i=void 0,o=t.clearMessages=function(){r.hide(),i.hide()},s=(t.displaySuccess=function(e){i.empty(),i.append($("<ul>").append($("<li>").html(e))),i.show()},t.displayError=function(e){r.empty(),r.append($("<ul>").append($("<li>").html(e))),r.show()});t.handleErrors=function(e,t){switch(r.empty(),e){case 422:var n=t.errors;r.append($('<ul id="error_list">'));var i=$("#error_list");for(var o in n)for(var a=n[o],c=0;c<a.length;c++)i.append($("<li>").html(a[c]));break;default:s(t.message?t.message:"OOPS! :( Seems like something went wrong. Try again later.")}r.show()},t.registerMessaging=function(){r=$("#app_errors"),i=$("#app_success"),o(),$("input").keyup(function(){return o()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerLogoutListener=t.requireSignIn=t.checkAuth=t.clearToken=t.setToken=t.getToken=void 0;var r=n(4),i=n(3),o=t.getToken=function(){return localStorage.getItem("auth-token")},s=(t.setToken=function(e){return localStorage.setItem("auth-token",e)},t.clearToken=function(){return localStorage.removeItem("auth-token")});t.checkAuth=function(){var e=(0,i.getUri)();"signup.html"!==e&&"signin.html"!==e&&(o()||(0,i.redirect)("signin.html"))},t.requireSignIn=function(){s(),(0,i.redirect)("signin.html")},t.registerLogoutListener=function(){(0,r.getElement)("#logout").addEventListener("click",function(e){e.preventDefault(),s(),(0,i.redirect)("index.html")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.apiUrl=function(e){return"https://mdiary-v1.herokuapp.com/api/v1/"+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.getUrl=function(){return window.location.href},i=(t.getUri=function(){var e=r();return e.substr(e.lastIndexOf("/")+1)},function(){return location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")});t.redirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index.html";return window.location=i()+"/"+e},t.redirectToEntries=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return window.location=i()+"/entry/"+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.getElement=function(e){var t=e.substring(1,e.length);switch(e.charAt(0)){case"#":return document.getElementById(t);case".":return document.getElementsByClassName(t)}};t.getValue=function(e){var t=r("#"+e);return""===t.value?null:t.value}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerDeleteListener=void 0;var r=n(2),i=n(3),o=n(4),s=n(0),a=n(1);t.registerDeleteListener=function(){(0,s.clearMessages)(),Array.from((0,o.getElement)(".delete")).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),function(e){var t=!1,n=0;fetch((0,r.apiUrl)("entries/"+e),{method:"delete",headers:{"Content-Type":"application/json","x-access-token":(0,a.getToken)()}}).then(function(e){return t=e.ok,n=e.status,e.json()}).then(function(r){t?(0,i.getUri)().startsWith("view.html")?((0,s.displaySuccess)("The entry was deleted successfully"),$("#entry_display").empty()):$("#entry_id_"+e).remove():401===n?(0,a.requireSignIn)():(0,s.handleErrors)(n,r)}).catch(function(e){console.log(e)})}(e.target.dataset.entry)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activateLocationLink=t.hideSignUpAndSignInLinks=t.hideLogoutLink=void 0;var r=n(3);t.hideLogoutLink=function(){return $("#logout").hide()},t.hideSignUpAndSignInLinks=function(){$('a[href^="sign"], a[href^="../sign"]').hide()},t.activateLocationLink=function(){var e=""===(0,r.getUri)()?"index.html":(0,r.getUri)(),t=document.querySelector('a[href="'+e+'"]');null!==t&&(t.className+=" active")}},function(e,t,n){"use strict";var r=n(8),i=n(1),o=n(0),s=n(6);(0,i.checkAuth)(),(0,o.registerMessaging)(),(0,s.activateLocationLink)(),(0,r.loadPage)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPage=void 0;var r=n(9),i=n(10),o=n(11),s=n(12),a=n(13),c=n(14),u=n(15),l=n(1),d=n(6),f=n(3);t.loadPage=function(){var e=(0,f.getUri)(),t=(0,f.getUrl)(),n=(0,l.getToken)();if("signup.html"===e||"signin.html"===e)return n?(0,f.redirectToEntries)():function(e){switch(e){case"signin.html":(0,s.registerLoginListener)();break;case"signup.html":(0,a.registerSignUpListener)()}(0,d.hideLogoutLink)()}(e);if(n){if((0,l.registerLogoutListener)(),(0,d.hideSignUpAndSignInLinks)(),t.includes("/entry/"))return function(e,t){if(""===e)return(0,o.showEntries)();if("create.html"===e)return(0,u.registerCreateEntryListener)();var n=new URL(t).searchParams.get("id");return e.startsWith("view.html")?(0,i.showEntry)(n):e.startsWith("edit.html")?(0,c.registerEditEntryListener)():void(0,f.redirect)()}(e,t);if("profile.html"===e)return(0,r.showProfile)();(0,f.redirect)()}else(0,f.redirect)("signin.html")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.showProfile=function(){console.log("SHOW PROFILE")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showEntry=void 0;var r=n(2),i=n(0),o=n(1),s=n(5);t.showEntry=function(e){var t=!1,n=0;fetch((0,r.apiUrl)("entries/"+e),{headers:{"Content-Type":"application/json","x-access-token":(0,o.getToken)()}}).then(function(e){return t=e.ok,n=e.status,e.json()}).then(function(e){if(t){var r=e.entry,a=r.id,c=r.title,u=r.body,l=r.created_at;$("#entry_display").html('<div class="panel">\n                            <div class="panel-body">\n                                <div class="entry">\n                                    <a href="edit.html?id='+a+'" class="link-button">Edit</a>\n                                    <h4>Date: '+l+"</h4>\n                                    <h4>Title: "+c+"</h4>\n                                    <p>"+u+'</p>\n                                    <a href data-entry="'+a+'" class="delete link-button">Delete</a>\n                                </div>\n                           </div>\n                        </div>'),(0,s.registerDeleteListener)()}else 401===n?(0,o.requireSignIn)():(0,i.handleErrors)(n,e)}).catch(function(e){console.log(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showEntries=void 0;var r=n(2),i=n(1),o=n(5),s=n(0);t.showEntries=function(){var e=!1,t=0;fetch((0,r.apiUrl)("entries"),{headers:{"Content-Type":"application/json","x-access-token":(0,i.getToken)()}}).then(function(n){return e=n.ok,t=n.status,n.json()}).then(function(n){if(e){var r=n.entries,a=n.count;if(a){for(var c=0;c<a;c++){var u=r[c],l=u.id,d=u.title,f=u.created_at;$("#entries_display").append('<div class="entry-card" id="entry_id_'+l+'">\n                                <div class="row">\n                                    <div class="col-m4">\n                                        <a href="view.html?id='+l+'" class="btn btn-sm">'+d+'</a>\n                                    </div>\n                                    <div class="col-m4">'+f+'</div>\n                                    <div class="col-m4">\n                                        <a href="edit.html?id='+l+'" class="btn-small">Edit</a>\n                                        <a href data-entry="'+l+'" class="delete btn-small">Delete</a>\n                                    </div>\n                                </div>\n                            </div>')}(0,o.registerDeleteListener)()}else(0,s.displaySuccess)("You have no entries.")}else 401===t?(0,i.requireSignIn)():(0,s.handleErrors)(t,n)}).catch(function(e){console.log(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerLoginListener=void 0;var r=n(2),i=n(1),o=n(3),s=n(4),a=n(0),c=function(){!function(e){var t=!1,n=0;fetch((0,r.apiUrl)("login"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return t=e.ok,n=e.status,e.json()}).then(function(e){t?((0,i.setToken)(e.token),(0,o.redirectToEntries)()):401===n?(0,a.displayError)("Invalid email or password. Try again."):(0,a.handleErrors)(n,e)}).catch(function(e){console.log(e)})}({email:(0,s.getValue)("email"),password:(0,s.getValue)("password")})};t.registerLoginListener=function(){(0,s.getElement)("#login_form").addEventListener("submit",function(e){e.preventDefault(),c()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerSignUpListener=void 0;var r=n(2),i=n(4),o=n(0),s=function(){!function(e){var t=!1,n=0;fetch((0,r.apiUrl)("signup"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return t=e.ok,n=e.status,e.json()}).then(function(e){t?(0,o.displaySuccess)('Successfully signed up. <a href="signin.html">Sign in</a> to get started!'):((0,o.handleErrors)(n,e),409===n?(0,o.displayError)("A user with the same email address already exists."):(0,o.handleErrors)(n,e))}).catch(function(e){console.log(e)})}({name:(0,i.getValue)("name"),email:(0,i.getValue)("email"),password:(0,i.getValue)("password")})};t.registerSignUpListener=function(){(0,i.getElement)("#sign_up_form").addEventListener("submit",function(e){e.preventDefault(),s()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.registerEditEntryListener=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.registerCreateEntryListener=function(){}}]);